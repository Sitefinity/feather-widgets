!function(r){"use strict";function s(t,e){return this.ratingContainer=t,this.isAccessibilityImplemented=!1,this.settings={maxValue:5,value:0,step:1,readOnly:!1,template:"",selectedClass:null!=this.ratingContainer.attr("data-sf-rating-selected-css-class")&&""!=this.ratingContainer.attr("data-sf-rating-selected-css-class")?this.ratingContainer.attr("data-sf-rating-selected-css-class"):"on",hoverClass:null!=this.ratingContainer.attr("data-sf-rating-hover-css-class")&&""!=this.ratingContainer.attr("data-sf-rating-hover-css-class")?this.ratingContainer.attr("data-sf-rating-hover-css-class"):"hover"},e&&jQuery.extend(this.settings,e),this}s.prototype={getValue:function(){return this.settings.value},setValue:function(t){this.settings.value=t,this.elementsRenderer(this).reset()},getBaseElementMarkup:function(){var t=r(this.settings.template),e=this.ratingContainer.siblings("LEGEND").attr("id");if(t&&t.length||(t=r('<div><span aria-hidden="true">&#9733;</span></div>')),!this.settings.readOnly&&this.isAccessibilityImplemented){var s=this.ratingContainer.attr("data-sf-rating-input-css-class")?this.ratingContainer.attr("data-sf-rating-input-css-class"):"";t=r('<div><label><input required type="radio" name="sfRatingInput" aria-labelledby="'+e+'" class="'+s+'"><span aria-hidden="true">&#9733;</span></label></div>')}return t.html()},isValidCssDefinition:function(t){return t.hasOwnProperty("from")&&t.hasOwnProperty("to")&&t.hasOwnProperty("css")},getCssClass:function(t,e){if(!r.isArray(e))return e;for(var s in e)if(this.isValidCssDefinition(e[s])&&e[s].from<t&&e[s].to>=t)return e[s].css},getSelectedCssClass:function(t){return this.getCssClass(t,this.settings.selectedClass)},getSelectedHoverClass:function(t){return this.getCssClass(t,this.settings.hoverClass)},elementsRenderer:function(a){function n(t){var e=a.ratingContainer.children();if(!r.isArray(t))return e.removeClass(t);for(var s in t)a.isValidCssDefinition(t[s])&&e.removeClass(t[s].css)}function i(t,e){var s=a.ratingContainer.children(),n=parseInt(t),i=t-n,r=n/a.settings.step;s.slice(0,r).addClass(a.getCssClass(1,e)),0!=i&&s.slice(r,t/a.settings.step).addClass(a.getCssClass(i,e))}return{fill:function(t){var e=a.getTargetedElement(t.target),s=a.ratingContainer.children().index(e)+1;i(s*a.settings.step,a.settings.selectedClass)},hover:function(t){n(a.settings.hoverClass);var e=a.getTargetedElement(t.target),s=a.ratingContainer.children().index(e)+1;i(s*a.settings.step,a.settings.hoverClass)},drainHover:function(){n(a.settings.hoverClass)},reset:function(){n(a.settings.selectedClass),n(a.settings.hoverClass),i(a.settings.value,a.settings.selectedClass)}}},selectElement:function(t){var e=this.ratingContainer.children(),s=this.getTargetedElement(t.target);this.settings.value=(e.index(s)+1)*this.settings.step,this.elementsRenderer(this).reset()},getTargetedElement:function(t){var e=t;return this.isAccessibilityImplemented&&(e=r(t).is("LABEL")?t:t.parentElement),e},attachEvents:function(){var t=this.ratingContainer.children();t.on("click",r.proxy(this.selectElement,this)),t.on("mouseover",this.elementsRenderer(this).hover),t.on("mouseout",this.elementsRenderer(this).drainHover),t.on("focus",this.elementsRenderer(this).hover),t.on("blur",this.elementsRenderer(this).reset),this.isAccessibilityImplemented&&(t.find("input").on("focus",this.elementsRenderer(this).hover),t.find("input").on("blur",this.elementsRenderer(this).reset))},render:function(){0<this.ratingContainer.siblings("LEGEND").length&&(this.isAccessibilityImplemented=!0),this.ratingContainer.empty();for(var t=this.getBaseElementMarkup(),e=0;e<this.settings.maxValue;e+=this.settings.step)this.ratingContainer.append(t);this.elementsRenderer(this).reset(),this.settings.readOnly||this.attachEvents()}},r.fn.extend({mvcRating:function(t){var e=new s(r(this),t);return e.render(),e}})}(jQuery);
//# sourceMappingURL=rating.test.min.js.map