!function(o){o(document).ready(function(){o('[data-sf-role="scheduler-wrapper"][data-sf-loaded="false"]').each(function(e,a){var r={eventAllDayEventTemplateHtml:o(a).find('[data-sf-role="event-alldayeventtemplate"]').html(),eventCalendarlistWrapperHtml:o(a).find('[data-sf-role="event-calendarlist-template-wrapper"]').html(),eventCalendarlistItemHtml:o(a).find('[data-sf-role="event-calendarlist-template-item"]').html(),eventEventTemplateHtml:o(a).find('[data-sf-role="event-eventtemplate"]').html()},i={calendarIdList:[],allowCalendarFilter:JSON.parse(o(a).attr("data-sf-allowcalendarfilter")),allowChangeCalendarView:JSON.parse(o(a).attr("data-sf-allowchangecalendarview")),calendarUrl:o(a).attr("data-sf-controller-calendars"),calendarListClassActive:o(a).attr("data-sf-calendarlist-class-active"),calendarList:o(a).find('[data-sf-role="calendarlist"]'),defaultview:o(a).attr("data-sf-defaultview"),eventsUrl:o(a).attr("data-sf-controller-events"),minCalendarLength:parseInt(o(a).attr("data-sf-mincalendarlength")),uiCulture:o(a).attr("data-sf-uiculture"),scheduler:o(a).find('[data-sf-role="scheduler"]'),timezoneOffset:o(a).attr("data-sf-timezoneoffset"),timezone:function(){if(kendo.timezone.windows_zones){var e=o.grep(kendo.timezone.windows_zones,function(e){return e.other_zone===o(a).attr("data-sf-timezoneid")});if(0<e.length)return e[0].zone}return""},siteid:o(a).attr("data-sf-siteid"),localTimezoneOffset:function(){var e=(new Date).getTimezoneOffset();return o(a).attr("data-sf-localtimezoneoffset",e),e},weekStartDay:o(a).attr("data-sf-weekstartday"),widgetId:o(a).attr("data-sf-widget-id"),currentPageId:o(a).attr("data-sf-current-page-id"),isRtl:o(a).attr("data-sf-rtl")};"True"===i.isRtl&&o('[data-sf-role="scheduler-wrapper"]').addClass("k-rtl"),kendo.culture().calendar.firstDay="Sunday"===i.weekStartDay?0:1,i.allowCalendarFilter?(o(r.eventCalendarlistWrapperHtml).appendTo(i.calendarList),i.calendarlistWrapper=o(i.calendarList).find('[data-sf-role="calendarlist-wrapper"]')):i.calendarList.remove();function t(e,a){var t;return t=l?{type:e,selected:n==a}:n==a?{type:e}:{},"timeline"===e&&(l||n==a)&&(t.eventHeight=50),t}var l=i.allowChangeCalendarView,n=i.defaultview,s=i.scheduler.kendoScheduler({editable:!1,batch:!0,timezone:i.timezone(),views:[t("day","Day"),t("workWeek","WorkWeek"),t("week","Week"),t("month","Month"),t("agenda","Agenda"),t("timeline","Timeline")],allDayEventTemplate:r.eventAllDayEventTemplateHtml,eventTemplate:r.eventEventTemplateHtml,dataSource:{transport:{read:{url:i.eventsUrl,dataType:"json",traditional:!0,type:"GET"},parameterMap:function(e,a){if("read"===a){var t=s.data("kendoScheduler"),r=t.view().startDate(),l=t.view().endDate(),n=6e4*i.localTimezoneOffset(),d={};return d.StartDate=new Date(r.getTime()-i.timezoneOffset-n).toISOString(),d.EndDate=new Date(l.getTime()-i.timezoneOffset-n).toISOString(),d.CalendarList=i.allowCalendarFilter?o.makeArray(i.calendarlistWrapper.find('[data-sf-role="calendarlist-item"].'+i.calendarListClassActive).attr("data-sf-id")):[],d.EventSchedulerViewMode=t.view().options.name.replace("View",""),d.UICulture=i.uiCulture,d.Id=i.widgetId,d.CurrentPageId=i.currentPageId,d.sf_site=i.siteid,d}}},serverFiltering:!0,schema:{model:{id:"Id",fields:{taskId:{from:"Id"},title:{from:"Title",defaultValue:"No title",validation:{required:!0}},start:{type:"date",from:"Start"},end:{type:"date",from:"End"},description:{from:"Description"},recurrenceId:{from:"RecurrenceID"},recurrenceRule:{from:"RecurrenceRule"},recurrenceException:{from:"RecurrenceException"},isAllDay:{type:"boolean",from:"IsAllDay"},calendarId:{from:"CalendarId",defaultValue:"045b2da5-a247-6ea2-811c-ff0000a3df5c"},eventUrl:{from:"EventUrl"}}}}},resources:[{field:"calendarId",dataValueField:"calendarId",dataSource:{transport:{read:{url:i.calendarUrl,dataType:"json",traditional:!0,type:"GET",complete:function(e,a){if(i.allowCalendarFilter&&e&&e.responseJSON){var t=e.responseJSON;(t=o.grep(t,function(e){return null!==e.title})).length>=i.minCalendarLength&&(o.each(t,function(e,a){var t=kendo.template(r.eventCalendarlistItemHtml);i.calendarlistWrapper.append(t(a)),i.calendarIdList.push(a.calendarId)}),i.calendarList.show())}}},parameterMap:function(e,a){if("read"===a){var t={};return t.UICulture=i.uiCulture,t.Id=i.widgetId,t.sf_site=i.siteid,t}}},schema:{model:{id:"CalendarId",fields:{calendarId:{from:"CalendarId"},title:{from:"Title"},color:{from:"Color"}}}}}}]});i.allowCalendarFilter&&i.calendarlistWrapper.on("click",'[data-sf-role="calendarlist-item"]',function(){if(!o(this).hasClass(i.calendarListClassActive)){var a=o(this).attr("data-sf-id");o(this).siblings(o(this).tagName).removeClass(i.calendarListClassActive),o(this).addClass(i.calendarListClassActive),s.data("kendoScheduler").dataSource.filter({operator:function(e){return 0<=o.inArray(e.calendarId,a&&""!==a?[a]:i.calendarIdList)}})}}),o(a).attr("data-sf-loaded",!0)})})}(jQuery);
//# sourceMappingURL=scheduler-events.min.js.map