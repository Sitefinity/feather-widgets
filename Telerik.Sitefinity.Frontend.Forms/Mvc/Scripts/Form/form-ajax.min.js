!function(g){void 0!==window.FormData&&g(function(){g('[data-sf-role="form-container"]:has([data-sf-role="ajax-submit-url"])').each(function(t,e){var u=g(e),c=u.find('[data-sf-role="loading-img"]'),m=u.find('[data-sf-role="fields-container"]'),p=u.find('[data-sf-role="success-message"]'),S=u.find('[data-sf-role="error-message"]'),h=u.find('input[data-sf-role="redirect-url"]').val(),b=u.find('input[data-sf-role="ajax-submit-url"]').val();u.find('button[type="submit"],input[type="submit"]').click(function(){var s=u.closest("form"),d=s.children();0<s.length&&d.unwrap();var l=u.find("form"),f=!1;0===l.length&&(f=!0,u.wrap("<form />"),l=u.parent()),l.one("submit",function(){for(var t=u.find("input"),e=!0,r=0;r<t.length;r++){var a=g(t[r]);"function"==typeof a.data("sfvalidator")&&(e=a.data("sfvalidator")()&&e)}if(!e)return!1;if("undefined"!=typeof MarketoSubmitScript){MarketoSubmitScript._populateFormId(g(l).find('input[data-sf-role="form-id"]').val());var i=g(l).find(MarketoSubmitScript._settings.externalFormSubmitButtonsQuery);0<i.length&&(MarketoSubmitScript._formFields=MarketoSubmitScript._getExternalFormFields(i[0])),MarketoSubmitScript._formFields&&0===MarketoSubmitScript._formFields.length&&MarketoSubmitScript._populateFieldsFromLabels(l),MarketoSubmitScript._formSubmitHandler(l)}var o=new FormData(l[0]),n=new XMLHttpRequest;return n.open("POST",b),n.onload=function(){if(200===n.status){var t=JSON.parse(n.response);t.success?t.redirectUrl&&""!==t.redirectUrl?document.location.replace(t.redirectUrl):t.message&&""!==t.message?(p.text(t.message),p.show(),c.hide()):h?document.location.replace(h):(p.show(),c.hide()):(S.text(t.error),S.show(),m.show(),m.find('[data-sf-role="captcha-refresh-button"]').click(),c.hide())}},c.show(),m.hide(),S.hide(),n.send(o),f&&u.unwrap(),0<s.length&&d.wrapAll(s),!1})})})})}(jQuery);
//# sourceMappingURL=form-ajax.min.js.map